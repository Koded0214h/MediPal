# üöÄ MediPal Deployment Guide

## üìã Pre-Deployment Checklist

### ‚úÖ Backend Preparation
- [x] Updated Django settings for production
- [x] Added environment variable support
- [x] Configured static file serving with Whitenoise
- [x] Added security headers for production
- [x] Created build script (`backend/build.sh`)
- [x] Updated Procfile for Render
- [x] Added runtime.txt for Python version
- [x] Created `.env` file template

### ‚úÖ Frontend Preparation
- [x] Updated Vite configuration for production
- [x] Added production environment file (`.env.production`)
- [x] Updated package.json with serve dependency
- [x] Created build script (`frontend/build.sh`)
- [x] Configured static file serving

### ‚úÖ Project Configuration
- [x] Created comprehensive `.gitignore`
- [x] Added `render.yaml` for automated deployment
- [x] Updated README with deployment instructions
- [x] Made build scripts executable

## üéØ Deployment Steps

### Step 1: Backend Deployment

1. **Go to [Render Dashboard](https://dashboard.render.com/)**
2. **Click "New +" ‚Üí "Web Service"**
3. **Connect your GitHub repository**
4. **Configure the service:**

   **Basic Settings:**
   - **Name**: `medipal-backend`
   - **Environment**: `Python 3`
   - **Region**: Choose closest to your users
   - **Branch**: `main` (or your default branch)
   - **Root Directory**: `backend`

   **Build & Deploy:**
   - **Build Command**: `./build.sh`
   - **Start Command**: `gunicorn backend.wsgi --log-file -`

5. **Add Environment Variables:**
   ```
   SECRET_KEY=your-super-secret-key-here
   DEBUG=False
   ALLOWED_HOSTS=medipal-backend.onrender.com
   ```

6. **Add PostgreSQL Database:**
   - Click "New +" ‚Üí "PostgreSQL"
   - Name: `medipal-db`
   - Link it to your web service
   - The `DATABASE_URL` will be automatically set

7. **Deploy!**

### Step 2: Frontend Deployment

1. **Go to [Render Dashboard](https://dashboard.render.com/)**
2. **Click "New +" ‚Üí "Static Site"**
3. **Connect your GitHub repository**
4. **Configure the service:**

   **Basic Settings:**
   - **Name**: `medipal-frontend`
   - **Branch**: `main` (or your default branch)
   - **Root Directory**: `frontend`

   **Build & Deploy:**
   - **Build Command**: `npm install && npm run build`
   - **Publish Directory**: `dist`

5. **Add Environment Variables:**
   ```
   VITE_API_BASE_URL=https://medipal-backend.onrender.com/api
   ```

6. **Deploy!**

## üîß Environment Variables Reference

### Backend Environment Variables
```bash
# Required
SECRET_KEY=your-super-secret-key-here
DEBUG=False
ALLOWED_HOSTS=medipal-backend.onrender.com

# Auto-generated by Render
DATABASE_URL=postgres://...

# Optional
CORS_ALLOWED_ORIGINS=https://medipal-frontend.onrender.com
```

### Frontend Environment Variables
```bash
# Required
VITE_API_BASE_URL=https://medipal-backend.onrender.com/api
```

## üåê URLs After Deployment

- **Backend API**: `https://medipal-backend.onrender.com`
- **Frontend App**: `https://medipal-frontend.onrender.com`
- **API Endpoints**: `https://medipal-backend.onrender.com/api/`

## üîç Post-Deployment Verification

### Backend Health Check
1. Visit: `https://medipal-backend.onrender.com/api/`
2. Should see API welcome message or 404 (which is normal)

### Frontend Health Check
1. Visit: `https://medipal-frontend.onrender.com`
2. Should load the MediPal application
3. Test login/registration functionality
4. Test health profile creation
5. Test wallet functionality

### Database Verification
1. Check Render dashboard for database status
2. Verify migrations ran successfully
3. Test API endpoints that require database access

## üö® Common Issues & Solutions

### Backend Issues

**Build Fails:**
- Check if `build.sh` is executable
- Verify all dependencies in `requirements.txt`
- Check Python version in `runtime.txt`

**Database Connection:**
- Verify `DATABASE_URL` is set correctly
- Check if PostgreSQL service is running
- Ensure migrations ran successfully

**Static Files:**
- Verify Whitenoise is in `MIDDLEWARE`
- Check `STATIC_ROOT` and `STATICFILES_STORAGE` settings

### Frontend Issues

**Build Fails:**
- Check Node.js version compatibility
- Verify all dependencies in `package.json`
- Check for syntax errors in React components

**API Connection:**
- Verify `VITE_API_BASE_URL` is correct
- Check CORS settings in backend
- Ensure backend is running and accessible

**Routing Issues:**
- Verify `render.yaml` has correct rewrite rules
- Check React Router configuration

## üìä Monitoring & Maintenance

### Logs
- Check Render dashboard for service logs
- Monitor error rates and response times
- Set up alerts for service failures

### Database
- Monitor database usage and performance
- Set up automated backups
- Scale database as needed

### Performance
- Monitor frontend build sizes
- Optimize images and assets
- Consider CDN for static assets

## üîí Security Checklist

- [ ] HTTPS is enabled and working
- [ ] Environment variables are properly set
- [ ] CORS is configured for specific domains
- [ ] Debug mode is disabled in production
- [ ] Secret key is properly generated
- [ ] Database credentials are secure
- [ ] No sensitive data in code repository

## üìû Support

If you encounter issues:

1. **Check Render documentation**: https://render.com/docs
2. **Review service logs** in Render dashboard
3. **Verify environment variables** are set correctly
4. **Test locally** to isolate issues
5. **Check GitHub issues** for similar problems

---

**Happy Deploying! üöÄ**

Your MediPal application should now be live and accessible to users worldwide! 